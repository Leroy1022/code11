it('should log an error when getLocationList() fails', () => {
    const errorMessage = 'Error fetching the location list!!!';
    const mockUBMCommonService = jasmine.createSpyObj('UBMCommonService', ['getLocationList']);
    mockUBMCommonService.getLocationList.and.returnValue(throwError(errorMessage)); 
    component.ubmCommonService = mockUBMCommonService;
    spyOn(console, 'log');
    component.getLocationList();
    setTimeout(() => {
      expect(console.log).toHaveBeenCalledWith(errorMessage);
    }, 0);
  });


 it('should log an error when getCurrencySymbolList() fails', fakeAsync(() => {
    const errorMessage = 'Error fetching the currency list!!!';
    const mockUBMCommonService = jasmine.createSpyObj('UBMCommonService', ['getCurrencySymbolList']);
    mockUBMCommonService.getCurrencySymbolList.and.returnValue(throwError(errorMessage)); 
    component.ubmCommonService = mockUBMCommonService;
    spyOn(console, 'log');
    component.getCurrencySymbolList();
    tick();
    expect(console.log).toHaveBeenCalledWith(errorMessage);
  }));


it('should populate facilityList when getLocationList() is successful', () => {
  const facilityList = [
    {
      Id: '1',
      Name: 'Asset Manager - Location',
    },
    {
      Id: '2',
      Name: 'Energy Location MR',
    },
  ];
  window.sessionStorage['UserRoleId'] = 1;
  mockUBMCommonService.getLocationList.and.returnValue(of(facilityList));
  component.getLocationList();
  expect(component.facilityList).toEqual([]);
});



  it('should fetch and process years correctly when getYearList is called', () => {
    const mockYears = [2022, 2023]; 

    invoiceYearService.getInvoiceYears.and.returnValue(of(mockYears));
    component.getYearList();
    expect(component.YearList).toEqual(mockYears);
    expect(component.Year.length).toBe(mockYears.length);
    });

it('should update properties and call getInvoiceDetails when apply() is called', () => {

    const mockYear = [
      { Year: 2022, IsYearDisabled: false, IsChecked: true },
      { Year: 2023, IsYearDisabled: true, IsChecked: false },
    ];

    component.Year = mockYear;
    component.isLoading = false;
    component.invoiceYearApplyClicked = false;
    component.showDropDown = true;
    component.tempResult = [];

    spyOn(component, 'getInvoiceDetails');

    component.apply();

    expect(component.isLoading).toBe(true);
    expect(component.invoiceYearApplyClicked).toBe(true);
    expect(component.showDropDown).toBe(false);
    expect(component.tempResult).toEqual([]);
    expect(component.getInvoiceDetails).toHaveBeenCalled();

    expect(component.retainInvoiceYearList).toEqual(mockYear);
  });

  it('should reset dropdown properties and call GetAllDropdownLists when resetDropdown() is called ', () => {
    component.locationClicked = true;
    component.buildingClicked = true;
    component.providerClicked = true;
    component.accountNumberClicked = true;
    component.premiseIdClicked = true;
    component.invoiceInformation.locationId = '123';
    component.invoiceInformation.buildingId = '456';
    component.invoiceInformation.providerId = 789;
    component.invoiceInformation.accountNumber = 'ABC';
    component.locationName = 'LocationName';
    component.buildingName = 'BuildingName';
    component.providerName = 'ProviderName';
    component.accountName = 'AccountName';
    component.premisesName = 'PremisesName';
    component.utilityType = 'UtilityType';
    component.accountGroupNumber = 'AccountGroupNumber';
    component.premiseNumberList = [1, 2, 3];
    component.searchTextLocation = 'SearchTextLocation';
    component.searchTextBuilding = 'SearchTextBuilding';
    component.searchTextProvider = 'SearchTextProvider';
    component.searchTextAccountNumber = 'SearchTextAccountNumber';
    component.searchTextPremisesId = 'SearchTextPremisesId';
    spyOn(component, 'GetAllDropdownLists');
    component.resetDropdown();
    expect(component.locationClicked).toBe(false);
    expect(component.buildingClicked).toBe(false);
    expect(component.providerClicked).toBe(false);
    expect(component.accountNumberClicked).toBe(false);
    expect(component.premiseIdClicked).toBe(false);
    expect(component.invoiceInformation.locationId).toBe('');
    expect(component.GetAllDropdownLists).toHaveBeenCalled();
  });


it('should update PremiseNumber when onPremiseNumberChange() is called', () => {

    component.premiseIdClicked = false;
    component.invoiceInformation.premiseNumber = '123';
    component.premisesName = 'PremisesName';
    component.searchTextPremisesId = 'SearchTextPremisesId';
    component.isPremiseDropdownOpen = true;

    const mockValue = '456';
    component.onPremiseNumberChange(mockValue);

    expect(component.premiseIdClicked).toBe(true);
    expect(component.invoiceInformation.premiseNumber).toBe(mockValue);
    expect(component.premisesName).toBe(mockValue);
    expect(component.searchTextPremisesId).toBe('');
    expect(component.isPremiseDropdownOpen).toBe(false);
  });

it('should call CommonService methods when ngOnDestroy() is called', () => {
 
    spyOn(commonService, 'setInvoiceSummaryExpanded');
    spyOn(commonService, 'setInvoiceSummaryEnabled');
    spyOn(commonService, 'enableUtilitySection');

    component.ngOnDestroy();

    expect(commonService.setInvoiceSummaryExpanded).toHaveBeenCalledWith(false);
    expect(commonService.setInvoiceSummaryEnabled).toHaveBeenCalledWith(false);
    expect(commonService.enableUtilitySection).toHaveBeenCalledWith(false);
  });
